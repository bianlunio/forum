workspace:
  base: /go
  path: src/forum

pipeline:
  test:
    image: golang:1.9-alpine
    commands:
      - sleep 15
      - go test -cover -coverpkg=./... -covermode=count ./tests

services:
  forum-postgres:
    image: postgres:10.1-alpine
    environment:
      - POSTGRES_DB=forum
      - POSTGRES_PASSWORD=forum_test_password
